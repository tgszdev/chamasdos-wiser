<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üö® Chamados WMS - Simples v050600</title>
    <!-- VERS√ÉO SIMPLES: 20250829_050600 - Lightweight Offline Version -->
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow-x: hidden;
        }
        
        .video-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            object-fit: cover;
            object-position: center center;
        }
        
        .video-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            z-index: -1;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 500px;
            width: 100%;
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 { font-size: 24px; margin-bottom: 10px; }
        .header p { opacity: 0.9; font-size: 14px; }
        
        .form {
            padding: 30px;
        }
        
        .field {
            margin-bottom: 20px;
        }
        
        .field label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
        }
        
        .field select, .field input, .field textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .field select:focus, .field input:focus, .field textarea:focus {
            outline: none;
            border-color: #4f46e5;
        }
        
        .field textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        .btn {
            width: 100%;
            padding: 16px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            margin-bottom: 10px;
            transition: transform 0.2s;
            text-decoration: none;
            display: block;
            text-align: center;
        }
        
        .btn:hover { transform: translateY(-2px); }
        
        .btn-primary { background: #25d366; color: white; }
        .btn-success { background: #10b981; color: white; }
        .btn-secondary { background: #6b7280; color: white; }
        
        .resultado {
            margin-top: 20px;
            padding: 20px;
            background: #f9fafb;
            border-radius: 12px;
            border: 2px solid #e5e7eb;
            display: none;
        }
        
        .texto-gerado {
            background: white;
            padding: 16px;
            border-radius: 8px;
            font-family: monospace;
            white-space: pre-line;
            font-size: 14px;
            margin-bottom: 16px;
            border: 1px solid #d1d5db;
        }
        

        
        .feedback {
            text-align: center;
            padding: 12px;
            border-radius: 8px;
            margin-top: 10px;
            display: none;
            font-weight: 500;
        }
        
        .feedback.success { background: #dcfce7; color: #166534; }
        .feedback.info { background: #dbeafe; color: #1d4ed8; }
        
        @media (max-width: 600px) {
            body { padding: 10px; }
            .header, .form { padding: 20px; }
        }
    </style>
</head>
<body>
    <!-- V√≠deo de fundo -->
    <video class="video-background" crossorigin="anonymous" playsinline preload="auto" muted loop autoplay>
        <source src="https://video.wixstatic.com/video/5d6ed6_f3549dd5db72460c90c6acef09667697/1080p/mp4/file.mp4" type="video/mp4">
        <!-- Fallback para navegadores que n√£o suportam v√≠deo -->
    </video>
    <div class="video-overlay"></div>
    
    <div class="container">
        <div class="header">
            <h1>üö® Chamados WMS <small style="font-size: 0.4em; opacity: 0.7;">v050600</small></h1>
            <p>Gerador r√°pido de chamados para WhatsApp</p>
        </div>
        
        <div class="form">
            <form id="form">
                <div class="field">
                    <label>üóÇÔ∏è Categoria:</label>
                    <select id="categoria" required>
                        <option value="">Selecione...</option>
                        <option value="Recebimento">üì¶ Recebimento</option>
                        <option value="Expedi√ß√£o">üöö Expedi√ß√£o</option>
                        <option value="Movimenta√ß√µes Internas">üîÑ Movimenta√ß√µes Internas</option>
                        <option value="Relat√≥rio">üìä Relat√≥rio</option>
                        <option value="Melhoria">üöÄ Melhoria</option>
                    </select>
                </div>
                
                <div class="field">
                    <label>üìù T√≠tulo:</label>
                    <input type="text" id="titulo" placeholder="Ex: Erro na confer√™ncia" required>
                </div>
                
                <div class="field">
                    <label>üìÑ Descri√ß√£o:</label>
                    <textarea id="descricao" placeholder="Descreva o problema..." required></textarea>
                </div>
                
                <div class="field">
                    <label>‚ö° Prioridade:</label>
                    <select id="prioridade" required>
                        <option value="">Selecione...</option>
                        <option value="üî¥ Cr√≠tica">üî¥ Cr√≠tica</option>
                        <option value="üü† Alta">üü† Alta</option>
                        <option value="üü° M√©dia">üü° M√©dia</option>
                        <option value="üü¢ Baixa">üü¢ Baixa</option>
                    </select>
                </div>
                
                <button type="submit" class="btn btn-primary">üì± GERAR PARA WHATSAPP</button>
            </form>
            
            <div id="resultado" class="resultado">
                <h3>‚úÖ Mensagem pronta!</h3>
                <div id="texto" class="texto-gerado"></div>
                
                <button id="whatsappWeb" class="btn btn-primary">üíª ABRIR WHATSAPP WEB</button>
                <button id="copiar" class="btn btn-success">üìã COPIAR TEXTO</button>
                <button id="limpar" class="btn btn-secondary">üîÑ NOVO CHAMADO</button>
                
                <div id="feedback" class="feedback"></div>
            </div>
        </div>
    </div>

    <script>
        const form = document.getElementById('form');
        const resultado = document.getElementById('resultado');
        const texto = document.getElementById('texto');
        const whatsappWeb = document.getElementById('whatsappWeb');

        
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const categoria = document.getElementById('categoria').value;
            const titulo = document.getElementById('titulo').value;
            const descricao = document.getElementById('descricao').value;
            const prioridade = document.getElementById('prioridade').value;
            
            if (!categoria || !titulo || !descricao || !prioridade) {
                mostrarFeedback('‚ùå Preencha todos os campos!', 'info');
                return;
            }
            
            const agora = new Date();
            const dataHora = agora.toLocaleString('pt-BR', {
                day: '2-digit', month: '2-digit', year: 'numeric',
                hour: '2-digit', minute: '2-digit'
            });
            
            const mensagem = `üö® CHAMADO WMS


üóÇÔ∏è Categoria: ${categoria}
üìù T√≠tulo: ${titulo}
üìÑ Descri√ß√£o: ${descricao}
‚ö° Prioridade: ${prioridade}

üìÖ Criado em: ${dataHora}`;
            
            texto.textContent = mensagem;
            resultado.style.display = 'block';
            
            resultado.scrollIntoView({ behavior: 'smooth' });
        });
        
        function abrirWhatsAppWeb() {
            const mensagem = texto.textContent;
            const url = `https://web.whatsapp.com/send?text=${encodeURIComponent(mensagem)}`;
            window.open(url, '_blank');
        }
        
        // Evento do bot√£o WhatsApp Web
        whatsappWeb.addEventListener('click', abrirWhatsAppWeb);
        
        document.getElementById('copiar').addEventListener('click', function() {
            const mensagem = texto.textContent;
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(mensagem).then(() => {
                    mostrarFeedback('‚úÖ Texto copiado!', 'success');
                });
            } else {
                // Fallback
                const textArea = document.createElement('textarea');
                textArea.value = mensagem;
                textArea.style.position = 'fixed';
                textArea.style.opacity = '0';
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                mostrarFeedback('‚úÖ Texto copiado!', 'success');
            }
        });
        
        document.getElementById('limpar').addEventListener('click', function() {
            form.reset();
            resultado.style.display = 'none';
            document.getElementById('categoria').focus();
        });
        
        function mostrarFeedback(msg, tipo) {
            const feedback = document.getElementById('feedback');
            feedback.textContent = msg;
            feedback.className = `feedback ${tipo}`;
            feedback.style.display = 'block';
            setTimeout(() => feedback.style.display = 'none', 3000);
        }
        

        
        // Sistema de autentica√ß√£o
        function checkAuthentication() {
            const savedLogin = localStorage.getItem('wms_session') || sessionStorage.getItem('wms_session');
            if (savedLogin) {
                try {
                    const session = JSON.parse(atob(savedLogin));
                    const now = new Date().getTime();
                    if (session.expires > now && session.user) {
                        return session;
                    }
                } catch (e) {}
            }
            return null;
        }
        
        function redirectToLogin() {
            window.location.href = '/login.html';
        }
        
        // Verificar autentica√ß√£o ao carregar
        document.addEventListener('DOMContentLoaded', function() {
            const session = checkAuthentication();
            if (!session) {
                redirectToLogin();
                return;
            }
            
            // Focar no primeiro campo
            document.getElementById('categoria').focus();
        });
    </script>
</body>
</html>